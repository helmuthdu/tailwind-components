var R=Object.defineProperty,P=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var S=(e,t,n)=>t in e?R(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$=(e,t)=>{for(var n in t||(t={}))L.call(t,n)&&S(e,n,t[n]);if(g)for(var n of g(t))M.call(t,n)&&S(e,n,t[n]);return e},j=(e,t)=>P(e,F(t));var A=(e,t)=>{var n={};for(var s in e)L.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&g)for(var s of g(e))t.indexOf(s)<0&&M.call(e,s)&&(n[s]=e[s]);return n};var f=(e,t,n)=>(S(e,typeof t!="symbol"?t+"":t,n),n),T=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var h=(e,t,n)=>(T(e,t,"read from private field"),n?n.call(e):t.get(e)),y=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},k=(e,t,n,s)=>(T(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);const b=e=>typeof e=="string",O=e=>typeof e=="object"&&e!==null,x=e=>typeof e=="function",w=Array.isArray,N=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase();class H{constructor(t=void 0,n=0){f(this,"attributes",{});f(this,"children",[]);f(this,"element");f(this,"index",0);f(this,"tag");this.element=t,this.index=n}}const v=Object.freeze({$for:e=>{const t=[];return!e||!w(e)?t.push(new H):e.forEach((n,s)=>t.push(new H(n,s))),t},$if:(e,t)=>e===void 0?!0:typeof e=="function"?e(t):!!e}),B=(e,t,n)=>{e==="style"||e==="dataset"?Object.entries(t).forEach(([s,a])=>n[e][s]=a):e==="className"||[O,x,w].some(s=>s(t))?n[e]=t:n instanceof HTMLElement&&(e==="innerHTML"?b(t)&&(n.innerHTML=t):n.setAttribute(e,t))},C=(e,t,n)=>{e!==void 0&&(w(e)?e.forEach(s=>C(s,t,n)):e instanceof HTMLElement||e instanceof SVGSVGElement?t.append(e):x(e)?C(n.element?e(n.element,n.index):e(),t,n):t.append(document.createTextNode(e.toString())))},D=(e,t="html")=>{const n=t==="fragment"?new DocumentFragment:document.createElement(e.tag);return Object.entries(e.attributes).forEach(([s,a])=>B(s,a,n)),e.children.forEach(s=>C(s,n,e)),n},G=(...e)=>{let t={},n=[];if((e==null?void 0:e.length)>0){const[s,...a]=e.filter(m=>m!==void 0);O(s)?(t=s,n=a):n=s}return{attributes:t,children:n}},I=(e,t="html")=>(...n)=>{const E=G(...n),{attributes:r}=E,i=r,{$for:s,$if:a}=i,m=A(i,["$for","$if"]),{children:l}=E,c=v.$for(s).filter(o=>v.$if(a,o.element)).map(o=>(Object.assign(o,{attributes:m,tag:e,children:l?[...l]:[]}),D(o,t)));return c.length===1?c[0]:c},Z=e=>new DOMParser().parseFromString(e,"text/html").body.children[0],_=(()=>["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].reduce((e,t)=>j($({},e),{[t]:I(t)}),{}))(),J=(...e)=>e.reduce((t,n)=>(b(n)?t+=`${n} `:O(n)&&Object.entries(n).filter(([s,a])=>a).forEach(([s])=>{t+=`${s} `}),t),"").trim(),V=(e,t=[])=>{(t!=null?t:[]).length>0&&Promise.all(t.map(n=>{if(b(n))return new CSSStyleSheet().replace(n);if(n instanceof CSSStyleSheet)return Promise.resolve(n);throw new Error("invalid css in styles")})).then(n=>{e.adoptedStyleSheets=n})},q=({onAttributeChanged:e,onConnected:t,onDisconnected:n,data:s,styles:a=[],template:m})=>{var l,c,E;return E=class extends HTMLElement{constructor(){super();y(this,l,!1);y(this,c,new Proxy(this,{get(r,i){const o=Reflect.get(r,i);return x(o)?o.bind(r):i==="dataset"?Object.entries(o).reduce((d,[p,u])=>j($({},d),{[p]:u===""?!0:u}),{}):o}}));V(this.attachShadow({mode:"open"}),a),Object.entries(s).filter(([r,i])=>i).forEach(([r,i])=>{var o,d;(d=(o=this.dataset)[r])!=null||(o[r]=i)}),this.update()}static get observedAttributes(){return[...Object.keys(s).map(r=>`data-${N(r)}`)]}connectedCallback(){k(this,l,!0),t&&t(h(this,c))}disconnectedCallback(){n&&n(h(this,c))}attributeChangedCallback(r,i,o){h(this,l)&&i!==o&&e&&e(r.replace("data-",""),i,o,h(this,c))}update(){const r=m(h(this,c)),i=this.shadowRoot;b(r)?i.innerHTML=r:w(r)&&i.replaceChildren(...r.flat())}fire(r,i){this.dispatchEvent(new CustomEvent(r,i))}event(r,i,o,d){var u;const p=b(r)?(u=this.shadowRoot)==null?void 0:u.getElementById(`${r}`):r;if(!p)throw new Error(`element with id="${r}" not found`);p.addEventListener(i,o,d)}get root(){var r;return(r=this.shadowRoot)==null?void 0:r.getElementById("root")}},l=new WeakMap,c=new WeakMap,E},K=(e,t)=>{customElements.define(e,q(t))};export{J as c,K as d,_ as m,Z as r};
