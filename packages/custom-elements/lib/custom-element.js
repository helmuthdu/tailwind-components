var k=Object.defineProperty,H=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var C=(e,t,n)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&C(e,n,t[n]);if(p)for(var n of p(t))x.call(t,n)&&C(e,n,t[n]);return e},w=(e,t)=>H(e,R(t));var L=(e,t)=>{var n={};for(var s in e)O.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&p)for(var s of p(e))t.indexOf(s)<0&&x.call(e,s)&&(n[s]=e[s]);return n};var M=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var f=(e,t,n)=>(M(e,t,"read from private field"),n?n.call(e):t.get(e)),$=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},A=(e,t,n,s)=>(M(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n);const m=e=>typeof e=="string",y=e=>typeof e=="object"&&e!==null,j=e=>typeof e=="function",E=Array.isArray,P=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),T=Object.freeze({$for:(e=void 0)=>E(e)?e.map((t,n)=>({element:t,index:n})):[{element:void 0,index:0}],$if:(e,t)=>e===void 0?!0:typeof e=="function"?e(t):!!e}),F=(e,t,n)=>{e==="style"||e==="dataset"?Object.entries(t).forEach(([s,a])=>n[e][s]=a):e==="className"||[y,j,E].some(s=>s(t))?n[e]=t:n instanceof HTMLElement&&(e==="innerHTML"?m(t)&&(n.innerHTML=t):n.setAttribute(e,t))},v=(e,t,n)=>{e!==void 0&&(E(e)?e.forEach(s=>v(s,t,n)):e instanceof HTMLElement||e instanceof SVGSVGElement?t.append(e):j(e)?v(n.element?e(n.element,n.index):e(),t,n):t.append(document.createTextNode(e.toString())))},N=(e,t="html")=>{const n=t==="fragment"?new DocumentFragment:document.createElement(e.tag);return Object.entries(e.attributes).forEach(([s,a])=>F(s,a,n)),e.children.forEach(s=>v(s,n,e)),n},B=(...e)=>{let t={},n=[];if((e==null?void 0:e.length)>0){const[s,...a]=e.filter(h=>h!==void 0);y(s)?(t=s,n=a.flat()):n=[s]}return{attributes:t,children:n}},G=(e="",t="html")=>(...n)=>{const S=B(...n),{attributes:o}=S,r=o,{$for:s,$if:a}=r,h=L(r,["$for","$if"]),{children:l}=S,c=T.$for(s).filter(i=>T.$if(a,i.element)).map(i=>N(w(g({},i),{attributes:h,tag:e,children:l}),t));return c.length===1?c[0]:c},z=e=>[...new DOMParser().parseFromString(e,"text/html").body.children],D=(()=>["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","rp","rt","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"].reduce((e,t)=>w(g({},e),{[t]:G(t)}),{}))(),Z=(...e)=>e.reduce((t,n)=>(m(n)?t+=`${n} `:y(n)&&Object.entries(n).filter(([s,a])=>a).forEach(([s])=>{t+=`${s} `}),t),"").trim(),I=(e,t=[])=>{(t!=null?t:[]).length>0&&Promise.all(t.map(n=>{if(m(n))return new CSSStyleSheet().replace(n);if(n instanceof CSSStyleSheet)return Promise.resolve(n);throw new Error("invalid css in styles")})).then(n=>{e.adoptedStyleSheets=n})},V=({onAttributeChanged:e,onConnected:t,onDisconnected:n,data:s,styles:a=[],template:h})=>{var l,c,S;return S=class extends HTMLElement{constructor(){super();$(this,l,!1);$(this,c,new Proxy(this,{get(o,r){const i=Reflect.get(o,r);return j(i)?i.bind(o):r==="dataset"?Object.entries(i).reduce((d,[b,u])=>w(g({},d),{[b]:u===""?!0:u}),{}):i}}));I(this.attachShadow({mode:"open"}),a),Object.entries(s).filter(([o,r])=>r).forEach(([o,r])=>{var i,d;(d=(i=this.dataset)[o])!=null||(i[o]=r)}),this.update()}static get observedAttributes(){return[...Object.keys(s).map(o=>`data-${P(o)}`)]}connectedCallback(){A(this,l,!0),t&&t(f(this,c))}disconnectedCallback(){n&&n(f(this,c))}attributeChangedCallback(o,r,i){f(this,l)&&r!==i&&e&&e(o.replace("data-",""),r,i,f(this,c))}update(){const o=h(f(this,c)),r=this.shadowRoot;m(o)?r.innerHTML=o:r.replaceChildren(...E(o)?o.flat():[o])}fire(o,r){this.dispatchEvent(new CustomEvent(o,r))}event(o,r,i,d){var u;const b=m(o)?(u=this.shadowRoot)==null?void 0:u.getElementById(`${o}`):o;if(!b)throw new Error(`element with id="${o}" not found`);b.addEventListener(r,i,d)}get root(){var o;return(o=this.shadowRoot)==null?void 0:o.getElementById("root")}},l=new WeakMap,c=new WeakMap,S},_=(e,t)=>{customElements.define(e,V(t))};export{Z as c,_ as d,D as m,z as r};
