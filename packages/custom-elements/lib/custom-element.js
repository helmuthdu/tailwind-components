var T=Object.defineProperty,$=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var S=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))x.call(t,n)&&S(e,n,t[n]);if(E)for(var n of E(t))R.call(t,n)&&S(e,n,t[n]);return e},j=(e,t)=>$(e,y(t));var C=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var f=(e,t,n)=>(C(e,t,"read from private field"),n?n.call(e):t.get(e)),u=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},L=(e,t,n,o)=>(C(e,t,"write to private field"),o?o.call(e,n):t.set(e,n),n);const m=e=>typeof e=="string",M=e=>typeof e=="object"&&e!==null,O=e=>typeof e=="function",b=Array.isArray,P=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),F=(e,t,n)=>{e==="style"||e==="dataset"?Object.entries(t).forEach(([o,h])=>n[e][o]=h):e==="className"||[M,O,b].some(o=>o(t))?n[e]=t:n instanceof HTMLElement&&(e==="innerHTML"?m(t)&&(n.innerHTML=t):n.setAttribute(e,t))},A=(e,t,n)=>{e!==void 0&&(b(e)?e.forEach(o=>A(o,t)):e instanceof HTMLElement||e instanceof SVGSVGElement?t.append(e):t.append(document.createTextNode(e.toString())))},N=e=>{const t=e.tag==="fragment"?new DocumentFragment:document.createElement(e.tag);return Object.entries(e.attributes).forEach(([n,o])=>F(n,o,t)),e.children.forEach(n=>A(n,t)),t},v=(e="fragment",t,...n)=>N({tag:e,attributes:t,children:n}),V=(e,t={},...n)=>v(e,t,...n),k=e=>[...new DOMParser().parseFromString(e,"text/html").body.children],D=(...e)=>e.reduce((t,n)=>(m(n)?t+=`${n} `:M(n)&&Object.entries(n).filter(([o,h])=>h).forEach(([o])=>{t+=`${o} `}),t),"").trim(),B=(e,t=[])=>{(t!=null?t:[]).length>0&&Promise.all(t.map(n=>{if(m(n))return new CSSStyleSheet().replace(n);if(n instanceof CSSStyleSheet)return Promise.resolve(n);throw new Error("invalid css in styles")})).then(n=>{e.adoptedStyleSheets=n})},G=({onAttributeChanged:e,onConnected:t,onDisconnected:n,data:o,styles:h=[],template:H})=>{var d,c,w;return w=class extends HTMLElement{constructor(){super();u(this,d,!1);u(this,c,new Proxy(this,{get(s,r){const i=Reflect.get(s,r);return O(i)?i.bind(s):r==="dataset"?Object.entries(i).reduce((a,[p,l])=>j(g({},a),{[p]:l===""?!0:l}),{}):i}}));B(this.attachShadow({mode:"open"}),h),Object.entries(o).filter(([s,r])=>r).forEach(([s,r])=>{var i,a;(a=(i=this.dataset)[s])!=null||(i[s]=r)}),this.update()}static get observedAttributes(){return[...Object.keys(o).map(s=>`data-${P(s)}`)]}connectedCallback(){L(this,d,!0),t&&t(f(this,c))}disconnectedCallback(){n&&n(f(this,c))}attributeChangedCallback(s,r,i){f(this,d)&&r!==i&&e&&e(s.replace("data-",""),r,i,f(this,c))}update(){const s=H(f(this,c)),r=this.shadowRoot;m(s)?r.innerHTML=s:r.replaceChildren(...b(s)?s.flat():[s])}fire(s,r){this.dispatchEvent(new CustomEvent(s,r))}event(s,r,i,a){var l;const p=m(s)?(l=this.shadowRoot)==null?void 0:l.getElementById(`${s}`):s;if(!p)throw new Error(`element with id="${s}" not found`);p.addEventListener(r,i,a)}get root(){var s;return(s=this.shadowRoot)==null?void 0:s.getElementById("root")}},d=new WeakMap,c=new WeakMap,w},Z=(e,t)=>{customElements.define(e,G(t))};export{D as c,Z as d,V as m,k as r};
